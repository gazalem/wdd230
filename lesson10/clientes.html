<!doctype html>
<html lang="es">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon32.jpeg">
    <link rel="icon" type="image/png" sizes="16x16" href="./images/favicon16.jpeg">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">

    <!-- Custom Styles -->
    <style>
        .hideElement {
            display: none;
        }
    </style>
    <style type="text/css">
        .bootstrap-timepicker-meridian,
        .meridian-column {
            display: none;
        }
    </style>

    <!-- script Geolocalización -->
    <script type="text/javascript">
        function iniciar() {
            var boton = document.getElementById('obtener');
            /*boton.addEventListener('click', obtener, false);*/
            obtener();
        }
        function print() {
            var [h, m] = document.getElementById('Salida').value.split(":");
            console.log((h % 12 ? h % 12 : 12) + ":" + m, h >= 12 ? 'PM' : 'AM');
        }

        function obtener() { navigator.geolocation.getCurrentPosition(mostrar, gestionarErrores); }

        function mostrar(posicion) {
            var ubicacion = document.getElementById('geoloc');
            var datos = '';
            datos += 'Latitud: ' + posicion.coords.latitude + ' ';
            datos += 'Longitud: ' + posicion.coords.longitude + '\n';
            //datos += 'Exactitud: ' + posicion.coords.accuracy + ' metros.';
            ubicacion.innerHTML = datos;


        }


        function gestionarErrores(error) {
            alert('Error: ' + error.code + ' ' + error.message + '\n\nPor favor compruebe que está conectado ' +
                'a internet y habilite la opción permitir compartir ubicación física');
        }

        window.addEventListener('load', iniciar, false);
    </script>
    <title>Proveedores | Felipe Motta</title>

</head>

<body>

    <form id="form">
        <br>
        <div class="container">
            <h1 class="text-center">Solicitud de Creación o Actualización</h1>
        </div>
        <div class="container">
            <form action="" id="proveedores-form" enctype="multipart/form-data" method="post">
                <div class="form-row">
                    <!-- Transaction Type -->
                    <div class="form-group col-sm-12">
                        <label for="transactionType">Tipo de Transacción:</label>
                        <select name="transactionType" id="transactionType" class="form-control">
                            <option value="">Seleccionar Tipo</option>
                            <option value="Nuevo Cliente">Cliente Nuevo</option>
                            <option value="Actualización de datos Cliente">Actualización de datos Cliente</option>

                        </select>
                    </div>
                    <div class="form-group col-sm-12 hideElement">
                        <label for="nombreAnterior">Código del cliente:</label>
                        <input type="text" class="form-control" id="nombreAnterior" name="nombreAnterior">
                    </div>

                    <div class="form-group col-sm-12">
                        <label for="sendTo">Enviar a Grupo:</label>
                        <select name="sendTo" id="sendTo" class="form-control" required>
                            <option value="">Seleccionar Grupo</option>
                            <option value="clientespanama@felipemotta.com">Panamá, Colón y Darién</option>
                            <option value="clientesprovcentrales@felipemotta.com">Provincias Centrales</option>
                            <option value="clienteschiriquibocas@felipemotta.com">Provincias de Chiriquí y Bocas del
                                Toro</option>
                        </select>
                    </div>





                    <div class="form-group col-sm-12">
                        <label for="tipoCliente">Tipo de Cliente:</label>
                        <select name="tipoCliente" id="tipoCliente" class="form-control">
                            <option value="Abarrotería">Abarrotería</option>
                            <option value="Almacen">Almacen</option>
                            <option value="Cafetería">Cafetería</option>
                            <option value="Farmacia">Farmacia</option>
                            <option value="ferreteria">ferreteria</option>
                            <option value="Mayorista">Mayorista</option>
                            <option value="Mini Super">Mini Super</option>
                            <option value="Otros">Otros</option>
                            <option value="Restaurante">Restaurante</option>
                            <option value="Super Independiente">Super Independiente</option>
                            <option value="Tienda de Conveniencia">Tienda de Conveniencia</option>
                        </select>
                    </div>
                    <!-- Customer Area -->


                    <div class="form-group col-sm-12">
                        <label for="Nombre">Nombre Comercial:</label>
                        <input type="text" class="form-control" id="Nombre" name="Nombre">
                    </div>
                    <!-- Fiscal Information -->
                    <div class="form-group w-50">
                        <label for="ruc">R.U.C:</label>
                        <input type="text" class="form-control" id="ruc" name="ruc">
                    </div>
                    <div class="form-group w-50">
                        <label for="dv">D.V:</label>
                        <input type="text" class="form-control" id="dv" name="dv">
                    </div>
                    <!-- Communication Information -->
                    <div class="form-group col-sm-6">
                        <label for="email">Email:</label>
                        <input type="email" class="form-control" id="email" name="email">
                    </div>
                    <div class="form-group col-sm-6">
                        <label for="telefono">Celular:</label>
                        <input type="phone" class="form-control" id="telefono" name="telefono">
                    </div>
                    <div class="form-group col-sm-6">
                        <label for="telefonooficina">Teléfono:</label>
                        <input type="phone" class="form-control" id="telefonooficina" name="telefonooficina">
                    </div>
                    <!-- Address Information -->
                    <div class="form-group col-sm-12">
                        <label for="direccion">Dirección:</label>
                        <input type="text" id="direccion" class="form-control" name="direccion">
                    </div>
                    <div class="form-group w-50">
                        <label for="ruc">Distrito:</label>
                        <input type="text" class="form-control" id="Distrito" name="Distrito">
                    </div>
                    <div class="form-group w-50">
                        <label for="dv">Corregimiento:</label>
                        <input type="text" class="form-control" id="Corregimiento" name="Corregimiento">
                    </div>
                    <!-- Sales -->
                    <div class="form-group col-sm-12">
                        <label for="vendedor">Vendedor:</label>
                        <input type="text" id="vendedor" class="form-control" name="vendedor">
                    </div>

                    <!-- Día de Visita -->
                    <div class="form-group col-sm-12">
                        <label for="diaVisita">Día de Visita:</label>
                        <select name="diaVisita" id="diaVisita" class="form-control">
                            <option value="">Seleccionar Día</option>
                            <option value="Lunes">Lunes</option>
                            <option value="Martes">Martes</option>
                            <option value="Miércoles">Miércoles</option>
                            <option value="Jueves">Jueves</option>
                            <option value="Viernes">Viernes</option>
                            <option value="Sábado">Sábado</option>
                        </select>
                    </div>

                    <div class="form-group col-sm-12">
                        <label for="entrada">Hora de Apertura:</label><br>
                        <input type="time" id="entrada" name="horaentrada">
                    </div>

                    <div class="form-group col-sm-12">
                        <label for="Salida">Hora de Cierre:</label><br>
                        <input type="time" id="Salida" name="Horasalida">
                    </div>

                    <!-- Geo localización -->
                    <div class="form-group col-sm-12">
                        <label for="geoloc">Geolocalización:</label>
                        <textarea name="geoloc" id="geoloc" class="form-control" rows="2"></textarea>
                    </div>
                    <!-- Adjuntar archivos -->
                    <div class="form-group">
                        <label for="avisoOperaciones">Adjuntar aviso de operaciones y Cedula Rep. Legal:</label>
                        <input type="file" class="form-control-file" id="avisoOperaciones" name="avisoOperaciones"
                            multiple accept="image/*, .pdf">
                    </div>
                </div><br>

                <div class="form-row">
                    <div class="form-group">
                        <input type="submit" id="button" class="btn btn-primary" value="Enviar Correo">
                    </div>
                </div>
            </form>
        </div>
        <!-- Geolocalization Button -->
        <div class="container">
            <div class="row" id="localizacion">
                <button id="obtener" class="btn btn-success btn-lg clearfix">Obtener Geolocalización</button>
            </div>
        </div>
    </form>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqBootstrapValidation/1.3.7/jqBootstrapValidation.min.js"
    crossorigin="anonymous"></script>
<script src="bootstrap-datepicker.min.js"></script>

<!-- Check the size of the file to attach -->
<script>
    var uploadField = document.getElementById("avisoOperaciones");
    uploadField.onchange = function () {
        if (this.files[0].size > 50000000) {
            alert("El tamaño del archivo debe ser menor a 20MB");
            this.value = "";
        };
    };
</script>
<script>
    var nameField = document.getElementById("transactionType");
    var actualizarCliente = document.querySelector(".hideElement")

    nameField.addEventListener("change", function () {
        // Show and hide of a form field input...
        if (nameField.value === "Actualización de datos Cliente") {
            actualizarCliente.style.display = "initial";
        } else {
            actualizarCliente.style.display = "none";
        }
    });
</script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

<script type="text/javascript">
    emailjs.init('YldObOALWqDQ2v-HQ')
</script>
<script>
    const btn = document.getElementById('button');

    document.getElementById('form')
        .addEventListener('submit', function (event) {
            event.preventDefault();

            btn.value = 'Sending...';

            const serviceID = 'default_service';
            const templateID = 'template_mhuj9p6';



            var inputSalida = document.getElementById('Salida');
            var inputEntrada = document.getElementById('entrada');



            inputSalida.type = "text"
            inputSalida.value = onTimeChange(inputSalida);

            inputEntrada.type = "text"
            inputEntrada.value = onTimeChange(inputEntrada);





            emailjs.sendForm(serviceID, templateID, this)
                .then(() => {
                    btn.value = 'Correo';
                    alert('Enviado Correctamente!');
                }, (err) => {
                    btn.value = 'Send Email';
                    alert(JSON.stringify(err));
                });


            console.log(this)
            inputEntrada.type = "time"
            inputSalida.type = "time"




        });

    function onTimeChange(inputEle) {
        var timeSplit = inputEle.value.split(':'),
            hours,
            minutes,
            meridian;
        hours = timeSplit[0];
        minutes = timeSplit[1];
        if (hours > 12) {
            meridian = 'PM';
            hours -= 12;
        } else if (hours < 12) {
            meridian = 'AM';
            if (hours == 0) {
                hours = 12;
            }
        } else {
            meridian = 'PM';
        }
        return hours + ':' + minutes + ' ' + meridian;
    }
</script>

</html>